---
tenant_id: mrm
client_id: global
project_id: platform_docs
artifact_type: prototype_specification
title: Media Plan — Техническое задание на прототип экрана
language: ru
industry: advertising
role_apply: [specialist, pm, strategist]
period: 2025-10
version: "1.0"
source_path: 02_ARTIFACTS/Media_Plan/Prototype_Specification.md
effective_date: 2025-10-24
visibility: internal
security_level: high
tags: [prototype, media_plan, ui, ux]
---

# 📊 Прототип экрана: Media Plan (Медиаплан)

**Артефакт:** Медиаплан  
**URL:** `/project/:id/media-plan`  
**Роли:** Specialist (Media Planner), PM, Strategist

→ **Общее ТЗ:** [PROTOTYPE_MASTER_SPECIFICATION.md](../../PROTOTYPE_MASTER_SPECIFICATION.md)  
→ **Структура данных:** [Data_Structure.md](./Data_Structure.md)

---

## 🎯 НАЗНАЧЕНИЕ ЭКРАНА

Создание и редактирование медиаплана — детальное распределение бюджета по каналам, платформам, форматам и времени. Ключевой инструмент Media Planner.

**Ключевые задачи:**
1. Создание строк медиаплана (100-150 строк)
2. Распределение бюджета
3. Расчет метрик (reach, frequency, GRP, CPM)
4. Оптимизация с помощью AI
5. Интеграция с медиаландшафтом
6. Экспорт в Excel/Google Sheets

---

## 📐 СТРУКТУРА ЭКРАНА

### Общая компоновка

```
┌─────────────────────────────────────────────────────────────────────┐
│  HEADER: MRM AI → Проекты → ЖК Солнечный → Медиаплан               │
├─────────────┬───────────────────────────────────┬───────────────────┤
│ ЛЕВАЯ       │  ОСНОВНОЙ КОНТЕНТ                │  AI АССИСТЕНТ     │
│ ПАНЕЛЬ      │                                   │                   │
│             │  TOOLBAR                          │  🤖 AI Planner    │
│ Навигация   │  [+Строка] [Оптимизация] [Экспорт│                   │
│             │                                   │  • Добавить       │
│ ✅ Бриф     │  SUMMARY CARDS                    │    площадку       │
│ ✅ Стратегия│  ┌───┬───┬───┬───┐               │  • Оптимизировать │
│ 🟡 План ←   │  │15M│142│9K │1.6K│               │  • Рассчитать     │
│ ⬜ ТЗ       │  └───┴───┴───┴───┘               │    reach          │
│             │                                   │                   │
│ Версии:     │  FILTERS & SEARCH                 │  💡 Советы:       │
│ • v3 (тек.) │  [Фильтры ▾] [🔍 Поиск]          │                   │
│ • v2        │                                   │  "CPM для OLV     │
│ • v1 (черн.)│  TABLE (Медиаплан)               │  ₽350-450..."     │
│             │  ┌─────────────────────────────┐ │                   │
│ Статус:     │  │ Строки медиаплана           │ │  📊 Бенчмарки:    │
│ 🟡 Черновик │  │ (таблица с данными)         │ │  • CPM OLV: ₽400  │
│             │  │                             │ │  • CTR: 0.8%      │
│             │  └─────────────────────────────┘ │                   │
└─────────────┴───────────────────────────────────┴───────────────────┘
```

---

## 📝 TOOLBAR

```
┌──────────────────────────────────────────────────────────────────┐
│ [+ Добавить строку] [✨ Оптимизировать] [🔄 Синхронизация]      │
│                              [💾 Сохранить] [📥 Экспорт ▾]       │
│                                                  └─ Excel        │
│                                                  └─ Google Sheets│
│                                                  └─ PDF          │
└──────────────────────────────────────────────────────────────────┘
```

**Кнопки:**
1. **Добавить строку** — новая строка плана (модалка)
2. **Оптимизировать** — AI перераспределяет бюджет
3. **Синхронизация** — обновление из медиаландшафта (CPM, contacts)
4. **Сохранить** — мануальное сохранение
5. **Экспорт** — выгрузка в разных форматах

---

## 📊 SUMMARY CARDS (Сводка)

```
┌───────────────┬───────────────┬───────────────┬───────────────┐
│ Общий бюджет  │ Всего строк   │ Ожид. лиды    │ Средний CPL   │
│               │               │               │               │
│ ₽15,000,000   │ 142 строки    │ 9,000 лидов   │ ₽1,667        │
│ ████████ 85%  │ 5 каналов     │ +12% от цели  │ ✅ В норме    │
└───────────────┴───────────────┴───────────────┴───────────────┘
```

**Индикаторы:**
- Прогресс-бар использования бюджета
- Badge статуса (норма/выше/ниже)
- Сравнение с целями из брифа

---

## 🔍 FILTERS & SEARCH

```
┌──────────────────────────────────────────────────────────────────┐
│ [Фильтры ▾]                    [🔍 Поиск площадок/форматов___  ]│
│  └─ По каналу:  ☑ Контекст ☑ Програм. ☑ VK ☑ Telegram          │
│  └─ По городу:  ☑ Москва ☑ СПб ☑ Казань                        │
│  └─ По статусу: ☑ Активные ☐ Архивные                          │
│                                                                  │
│ Быстрые фильтры: [Все] [Контекст] [Медийка] [Соцсети]          │
└──────────────────────────────────────────────────────────────────┘
```

---

## 📋 ТАБЛИЦА МЕДИАПЛАНА

### Структура колонок

```
┌──────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ ☐│ID │Город  │Канал     │Площадка      │Формат    │Бюджет  │CPM  │Показы  │Клики│CPL │Лиды│Даты     │Статус│...│
├──────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ ☐│001│Москва │Контекст  │Яндекс Директ │Поиск     │500,000 │120  │4,200   │210  │2380│210 │01-31.11 │✅    │ → │
│ ☐│002│Москва │Контекст  │Яндекс Директ │РСЯ       │300,000 │80   │3,750   │150  │2000│150 │01-31.11 │✅    │ → │
│ ☐│003│Москва │Програм.  │Getintent     │OLV       │800,000 │400  │2,000,000│1600│500 │320 │01-31.11 │✅    │ → │
│ ☐│004│СПб    │VK        │VK Реклама    │Feed      │200,000 │150  │1,333,000│800 │250 │160 │01-31.11 │🟡    │ → │
│...                                                                                                                │
│ [+ Добавить строку]                                      Показано 1-20 из 142                   [1][2][3]...[8] │
└──────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

### Колонки (детали)

| Колонка | Ширина | Тип | Редактирование | Описание |
|---------|--------|-----|----------------|----------|
| ☐ | 40px | Checkbox | - | Множественный выбор |
| ID | 60px | Text | Read-only | MP-001, MP-002... |
| Город | 100px | Select | Inline | Москва, СПб, Казань |
| Канал | 120px | Select | Inline | Контекст, Програм., VK... |
| Площадка | 150px | Autocomplete | Inline | Из медиаландшафта |
| Формат | 120px | Select | Inline | Поиск, РСЯ, OLV, Feed... |
| Бюджет | 120px | Number | Inline | ₽, автоформат (500,000) |
| CPM | 80px | Number | Inline | ₽, подсветка отклонений |
| Показы | 100px | Number | Calculated | Авторасчет из бюджета/CPM |
| Клики | 80px | Number | Calculated | Прогноз по CTR |
| CPL | 80px | Number | Calculated | Бюджет / Лиды |
| Лиды | 80px | Number | Inline | Прогноз или цель |
| Даты | 120px | Date Range | Inline | 01-31.11.2025 |
| Статус | 60px | Badge | - | ✅ 🟡 ⬜ |
| → | 40px | Button | - | Детали/Редактирование |

### Inline редактирование

**Активация:**
- Двойной клик на ячейку
- Enter — сохранить
- Esc — отменить
- Tab — следующая ячейка

**Типы полей:**
- **Number:** форматирование с пробелами (500 000)
- **Select:** dropdown с поиском
- **Autocomplete:** подсказки из медиаландшафта
- **Date Range:** календарь выбора диапазона

**Автоматические расчеты:**
```
Показы = Бюджет / (CPM / 1000)
Клики = Показы × CTR
Лиды = Клики × CR
CPL = Бюджет / Лиды
```

### Подсветка и валидация

**Цветовые индикаторы:**

```css
/* CPM отклонение от бенчмарка */
.cpm-low { background: #E8F5E9; }      /* <-20% */
.cpm-normal { background: white; }     /* ±20% */
.cpm-high { background: #FFEBEE; }     /* >+20% */

/* Статусы строк */
.status-active { color: #4CAF50; }     /* ✅ */
.status-pending { color: #FF9800; }    /* 🟡 */
.status-inactive { color: #BDBDBD; }   /* ⬜ */
```

**Тултипы при hover:**
```
Hover на CPM с отклонением:
┌────────────────────────────────────┐
│ CPM: ₽500 (+25% от бенчмарка)     │
│ Бенчмарк OLV: ₽350-450             │
│ Рекомендуем пересмотреть условия   │
└────────────────────────────────────┘
```

---

## ➕ ДОБАВЛЕНИЕ СТРОКИ (Модалка)

```
┌─ Добавить строку медиаплана ──────────────────────────────────┐
│                                                           [×]  │
│                                                                │
│  Город *                                                       │
│  [Москва                          ▾]                           │
│                                                                │
│  Канал *                                                       │
│  [Контекстная реклама            ▾]                           │
│                                                                │
│  Площадка *                                                    │
│  [Яндекс Директ                  ▾] 🔗 Из медиаландшафта     │
│                                                                │
│  Формат *                                                      │
│  [Поиск                          ▾]                           │
│                                                                │
│  ─────────────────────────────────────────────────────────────│
│                                                                │
│  Бюджет *                Pricing Model                         │
│  [500000         ] ₽     [CPC               ▾]                 │
│                                                                │
│  CPM/CPC                 Flight Dates *                        │
│  [120            ] ₽     [01.11 - 30.11.2025  📅]             │
│                                                                │
│  ─────────────────────────────────────────────────────────────│
│                                                                │
│  ┌─ AI Подсказка ──────────────────────────────────────────┐ │
│  │ Для Яндекс Директ: Поиск в Москве:                      │ │
│  │ • Средний CPM: ₽100-150                                  │ │
│  │ • Рекомендуемый бюджет: ₽400K-600K/месяц                │ │
│  │ • Ожидаемые лиды: 180-250                                │ │
│  │                                                          │ │
│  │ Контакты площадки:                                       │ │
│  │ 📧 partner@yandex.ru                                     │ │
│  │ 📞 +7 495 123-45-67                                      │ │
│  └──────────────────────────────────────────────────────────┘│
│                                                                │
│                              [Отменить] [Добавить строку]      │
└────────────────────────────────────────────────────────────────┘
```

**Функции:**
- Автозаполнение из медиаландшафта
- AI предложения по бюджету
- Контакты площадки
- Валидация обязательных полей

---

## ✨ ОПТИМИЗАЦИЯ С AI

### Кнопка "Оптимизировать"

**Flow:**
```
User: [Клик "Оптимизировать"]
  ↓
Modal: "AI проанализирует медиаплан и предложит улучшения"
       [Оптимизировать по:]
       ☑ CPL (снизить стоимость лида)
       ☑ Охвату (максимизировать reach)
       ☐ ROMI (повысить возврат инвестиций)
       [Начать оптимизацию] [Отменить]
  ↓
Loading: "Анализирую 142 строки... 30%"
         "Сравниваю с бенчмарками... 60%"
         "Генерирую предложения... 100%"
  ↓
Results Modal:
  ┌─ Рекомендации по оптимизации ────────────────────────┐
  │                                                       │
  │  Найдено 8 возможностей улучшения:                    │
  │                                                       │
  │  1. 🔻 Снизить CPM на OLV (-15%)                     │
  │     Текущий: ₽400 → Предложение: ₽340                │
  │     Экономия: ₽120,000                                │
  │     [Применить]                                       │
  │                                                       │
  │  2. ➕ Добавить Telegram Ads                          │
  │     Бюджет: ₽500,000 (из резерва)                    │
  │     Ожидаемо: +200 лидов                              │
  │     [Применить]                                       │
  │                                                       │
  │  3. 🔄 Перераспределить между городами                │
  │     Москва: -₽300K, СПб: +₽300K                      │
  │     ROI в СПб выше на 18%                             │
  │     [Применить]                                       │
  │                                                       │
  │  ...еще 5 рекомендаций                                │
  │                                                       │
  │  Общая экономия: ₽450,000                             │
  │  Доп. лиды: +500                                      │
  │  Улучшение ROI: +25%                                  │
  │                                                       │
  │           [Применить все] [Выбрать] [Отменить]        │
  └───────────────────────────────────────────────────────┘
```

---

## 📊 ВИЗУАЛИЗАЦИИ

### Charts Panel (выдвижная правая панель)

```
┌─ Визуализации ─────────────────────────────────────────┐
│                                                    [×]  │
│                                                         │
│  ── Распределение бюджета ──────────────────────────── │
│                                                         │
│  По каналам:                                            │
│  ┌─────────────────────────────────────────────────┐   │
│  │    PIE CHART                                    │   │
│  │     ╱───────╲                                   │   │
│  │   ╱│    40%  │╲   • Контекст: 40% (₽6M)       │   │
│  │  │ │░░░░░░░░░│ │  • Програм: 23% (₽3.5M)      │   │
│  │  │ └─────────┘ │  • VK: 20% (₽3M)             │   │
│  │   ╲          ╱   • Telegram: 17% (₽2.5M)      │   │
│  │     ╲───────╱                                   │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  По городам:                                            │
│  Москва    ██████████████████ 53% (₽8M)                │
│  СПб       █████████ 27% (₽4M)                         │
│  Казань    ██████ 20% (₽3M)                            │
│                                                         │
│  ── Прогноз результатов ────────────────────────────── │
│                                                         │
│  Лиды по месяцам:                                       │
│  ┌─────────────────────────────────────────────────┐   │
│  │  LINE CHART                                     │   │
│  │  9K │                           ╱──             │   │
│  │     │                     ╱────╱                │   │
│  │  6K │              ╱─────╱                      │   │
│  │     │        ╱────╱                             │   │
│  │  3K │  ╱───╱                                    │   │
│  │     └───────────────────────────────────────    │   │
│  │      Нояб   Дек    Янв                          │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ── Метрики эффективности ─────────────────────────── │
│                                                         │
│  CPL по каналам:                                        │
│  ┌─────────────────────────────────────────────────┐   │
│  │  BAR CHART                                      │   │
│  │  Контекст   ████ ₽1,200                        │   │
│  │  VK         ██████ ₽2,000                      │   │
│  │  Програм.   ███████ ₽2,333                     │   │
│  │  Telegram   ████████ ₽2,500                    │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  [Экспорт графиков]                                     │
└─────────────────────────────────────────────────────────┘
```

### Кнопка открытия Charts

```
[📊 Визуализации]  ← В toolbar, открывает правую панель
```

---

## 🤖 AI-АССИСТЕНТ

### Функции для Media Plan

```
┌───────────────────────┐
│ 🤖 AI Media Planner   │
├───────────────────────┤
│                       │
│ ── Быстрые действия ──│
│                       │
│ ➕ Добавить площадку  │
│    из ландшафта       │
│                       │
│ ✨ Оптимизировать     │
│    распределение      │
│                       │
│ 📊 Рассчитать         │
│    reach/frequency    │
│                       │
│ 💰 Проверить CPM      │
│    по бенчмаркам      │
│                       │
│ 📤 Экспорт в Excel    │
│                       │
│ ── Инсайты ───────────│
│                       │
│ 💡 "CPM на OLV ₽400   │
│ выше среднего (₽350). │
│ Рекомендуем           │
│ пересмотреть условия  │
│ с площадкой."         │
│                       │
│ 💡 "Telegram Ads      │
│ показывает ROI 3.5x   │
│ для премиум ЦА.       │
│ Увеличьте долю до 20%"│
│                       │
│ [Применить]           │
│                       │
│ ── Бенчмарки ─────────│
│                       │
│ 📊 Средние CPM:       │
│ • OLV: ₽350-450       │
│ • Поиск: ₽100-150     │
│ • VK Feed: ₽120-180   │
│ • Telegram: ₽200-300  │
│                       │
│ 📊 Средние CTR:       │
│ • Поиск: 3-5%         │
│ • РСЯ: 0.5-1.5%       │
│ • OLV: 0.8-1.2%       │
│ • VK: 0.5-1.0%        │
│                       │
└───────────────────────┘
```

### Интеграция с медиаландшафтом

**При выборе площадки:**
```
User: [Выбирает "Яндекс Директ"]
  ↓
AI: "Загружаю данные из медиаландшафта..."
  ↓
AI показывает:
  ┌───────────────────────────────────┐
  │ Яндекс Директ                     │
  │                                   │
  │ Форматы: Поиск, РСЯ, Медийка      │
  │                                   │
  │ CPM бенчмарки:                    │
  │ • Поиск: ₽100-150                 │
  │ • РСЯ: ₽80-120                    │
  │                                   │
  │ Контакты:                         │
  │ 📧 partner@yandex.ru              │
  │ 📞 +7 495 123-45-67               │
  │                                   │
  │ [Добавить строку с этими данными] │
  └───────────────────────────────────┘
```

---

## 🔄 СИНХРОНИЗАЦИЯ

### Кнопка "Синхронизация"

**Обновляет:**
- CPM из медиаландшафта
- Контакты площадок
- Доступность форматов
- Бенчмарки

**Flow:**
```
User: [Клик "Синхронизация"]
  ↓
Progress: "Синхронизация с медиаландшафтом..."
          "Обновлено 45 из 142 строк"
  ↓
Result:
  ┌─ Результаты синхронизации ────────────┐
  │ Обновлено: 45 строк                   │
  │                                       │
  │ Изменения:                            │
  │ • CPM: 12 строк (↓ среднее -8%)       │
  │ • Контакты: 8 площадок                │
  │ • Новые форматы: 3 площадки           │
  │                                       │
  │ ⚠️ Внимание: 2 площадки недоступны    │
  │                                       │
  │           [Просмотр] [OK]              │
  └───────────────────────────────────────┘
```

---

## 📤 ЭКСПОРТ

### Форматы экспорта

**Excel:**
- Полная таблица с формулами
- Форматирование (цвета, бордеры)
- Summary лист с графиками
- Pivot tables

**Google Sheets:**
- Создание нового документа
- Шаринг ссылки
- Двусторонняя синхронизация

**PDF:**
- Презентационный вид
- Таблица + графики
- Summary на первой странице

---

## 📱 АДАПТИВНОСТЬ

### Desktop (1440px+)
- Таблица с 12+ колонками
- Все функции доступны
- Charts в side panel

### Tablet (768px)
- Горизонтальный скролл таблицы
- Скрытие некоторых колонок
- Charts в overlay

### Mobile (375px)
- Карточки вместо таблицы
- Упрощенный фильтр
- Только ключевые метрики

---

## 🎬 АНИМАЦИИ

### Добавление строки
- **Fade in** (300ms) + **slide down**
- Подсветка новой строки (2 сек)

### Оптимизация
- **Progress bar** с анимацией
- **Pulse** на измененных ячейках

### Inline edit
- **Focus** анимация рамки
- **Success** — зеленая галочка (fade)
- **Error** — shake + красная рамка

---

## ✅ КРИТЕРИИ ПРИЕМКИ

### Функциональность
- ✅ Таблица с 12+ колонками
- ✅ Inline редактирование
- ✅ Автоматические расчеты
- ✅ Добавление/удаление строк
- ✅ Фильтры и поиск
- ✅ Множественный выбор (bulk actions)
- ✅ AI оптимизация
- ✅ Интеграция с медиаландшафтом
- ✅ Синхронизация данных
- ✅ Экспорт (Excel, Sheets, PDF)

### UI/UX
- ✅ Соответствие дизайн-системе
- ✅ Адаптивность (desktop/tablet/mobile)
- ✅ Графики и визуализации
- ✅ Тултипы и подсказки
- ✅ Keyboard navigation (Tab, Enter, Esc)

### Производительность
- ✅ Виртуализация таблицы (100+ строк)
- ✅ Debounce на поиск (300ms)
- ✅ Lazy loading графиков
- ✅ Оптимизация расчетов

---

**Версия:** 1.0  
**Дата:** 2025-10-24  
**Статус:** ✅ Готово к прототипированию

